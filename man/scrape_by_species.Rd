% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/method-species.R
\name{scrape_by_species}
\alias{scrape_by_species}
\title{Scrape UNITE + INSD by species name (Method 1 â€“ variants + pagination)}
\usage{
scrape_by_species(
  species,
  delay_seconds = 1,
  max_variants = 20,
  max_pages = 50
)
}
\arguments{
\item{species}{Character vector of species names.}

\item{delay_seconds}{Delay between actions (seconds).}

\item{max_variants}{Safety cap on dropdown variants per species+dataset.}

\item{max_pages}{Safety cap on pages per variant.}
}
\value{
A tibble with columns:
\describe{
\item{accession}{accession as shown in the main table}
\item{species}{species name queried}
\item{country}{country (details-page Sampling area if available, else table)}
\item{marker}{Sequenced regions}
\item{sequence}{nucleotide sequence}
\item{method}{"species"}
\item{database}{"UNITE" or "INSD"}
\item{date_scraped}{Sys.Date()}
}
}
\description{
For each species, and for each dataset (UNITE, INSD), this:
\enumerate{
\item Opens the Sequences tab with the chosen dataset.
\item Selects all regions and the "include subtaxa" box.
\item Types the species name.
\item Iterates over dropdown variants:
\itemize{
\item attempt 1: Enter (first option)
\item attempt >1: ArrowDown^(attempt-1) then Enter
It reads the selected label from
\verb{#taxon_name_repr_div_seq > span:nth-child(1)} and stops when it
wraps around (same label seen again).
}
\item For each variant that yields records, it paginates over \emph{all} pages,
clicks each details link, and scrapes marker + sequence + country.
}
}
